# ✨ 新功能说明

## 🆕 v1.1.0 - 多店铺API管理 + 演示数据

### 1. 每个店铺独立配置API密钥 🔑

#### 为什么需要这个功能？
- 支持多个主体的店铺，每个主体有自己的API密钥
- 更灵活的权限管理
- 便于团队协作

#### 如何使用？

**步骤1：添加店铺**
1. 访问"店铺管理"页面
2. 点击"添加店铺"
3. 填写店铺基本信息（店铺ID、名称、地区等）
4. 保存

**步骤2：配置API密钥**
1. 在店铺列表中找到您的店铺
2. 点击"API配置"按钮
3. 填入从Temu开放平台获取的：
   - App Key
   - App Secret
   - Access Token（可选，用于数据同步）
4. 保存

**步骤3：查看配置状态**
- 已配置：绿色"已配置"标签 ✅
- 未配置：黄色"未配置"标签 ⚠️

#### 界面预览

```
店铺列表
┌─────────────────────────────────────────────────┐
│ 店铺名称    地区  API配置   操作                │
├─────────────────────────────────────────────────┤
│ 美国店铺    US    ✅已配置  [API配置] [编辑]  │
│ 英国店铺    UK    ⚠️未配置  [API配置] [编辑]  │
└─────────────────────────────────────────────────┘
```

### 2. 演示数据生成器 📊

#### 为什么需要演示数据？
- 快速体验系统功能
- 无需真实API密钥即可测试
- 查看各种图表和统计效果
- 培训和演示用途

#### 包含什么数据？

**3个演示店铺**
- 分布在不同地区（US、UK、DE）
- 每个店铺有完整的配置信息
- 自动配置模拟的API密钥

**45个商品**
- 每个店铺15个商品
- 涵盖电子产品、配件、运动用品等
- 包含价格、成本、库存信息
- 75%在售，25%下架

**450个订单**
- 每个店铺150个订单
- 时间跨度：最近90天
- 完整的订单流程状态
- 包含价格、成本、利润数据

**15个活动**
- 各种类型的营销活动
- 包含过去、现在、未来的活动

#### 如何生成演示数据？

**方法一：使用Makefile（最简单）**
```bash
make demo-data
```

**方法二：使用Docker Compose**
```bash
docker-compose exec backend python scripts/generate_demo_data.py
```

**方法三：本地运行**
```bash
cd backend
python scripts/generate_demo_data.py
```

#### 生成结果

```
==========================================
演示数据生成完成！
==========================================

📊 数据统计:
  • 店铺数量: 3
  • 商品数量: 45
  • 订单数量: 450

💰 财务数据:
  • 总GMV: $25,843.50
  • 总利润: $13,921.47
  • 利润率: 53.87%

🏪 店铺列表:
  • 演示店铺1 (US): 150个订单, GMV $8,614.50
  • 演示店铺2 (UK): 150个订单, GMV $8,614.50
  • 演示店铺3 (DE): 150个订单, GMV $8,614.50
```

#### 查看演示数据

生成后，访问系统各页面：

1. **仪表板** - 查看总览数据和趋势图
2. **店铺管理** - 查看3个演示店铺
3. **订单管理** - 浏览450个订单
4. **商品管理** - 查看商品和成本
5. **数据统计** - 查看各类统计图表

#### 清除演示数据

演示数据不会影响真实数据。清除演示数据：

```bash
# 方法一：重新运行生成脚本（会自动清除旧数据）
make demo-data

# 方法二：完全重置
make clean
make dev
make db-init
```

### 3. 数据同步API 🔄

新增了数据同步接口，支持从Temu同步数据：

```bash
# 同步店铺订单
POST /api/sync/shops/{shop_id}/orders

# 同步店铺商品
POST /api/sync/shops/{shop_id}/products
```

这些接口会使用店铺配置的API密钥进行调用。

### 4. 改进的API配置界面 🎨

**新增功能：**
- 独立的API配置模态框
- 密码字段保护（App Secret）
- 配置提示和帮助链接
- API配置状态可视化

**用户体验提升：**
- 清晰的配置指引
- 实时配置状态显示
- 友好的错误提示

## 📚 相关文档

- [演示数据使用指南](README_DEMO_DATA.md)
- [Docker使用指南](docs/DOCKER_GUIDE.md)
- [API文档](docs/API.md)

## 🎯 快速开始

```bash
# 1. 启动服务
make dev
make db-init

# 2. 生成演示数据
make demo-data

# 3. 访问系统
open http://localhost:5173

# 4. 体验功能
# - 查看仪表板的数据总览
# - 在店铺管理中配置API
# - 浏览订单和统计报表
```

## 💡 使用建议

### 适用场景

**使用演示数据：**
- ✅ 首次使用系统
- ✅ 功能培训和演示
- ✅ 测试新功能
- ✅ 开发和调试

**使用真实数据：**
- ✅ 正式生产环境
- ✅ 实际业务管理
- ✅ 数据分析决策

### 最佳实践

1. **初学者**
   - 先生成演示数据
   - 熟悉各个功能模块
   - 了解数据流程
   - 再添加真实店铺

2. **演示展示**
   - 使用演示数据
   - 重点展示图表和统计
   - 演示后可快速重置

3. **正式使用**
   - 清除演示数据（可选）
   - 添加真实店铺
   - 配置API密钥
   - 开始数据同步

## 🔧 技术细节

### 数据模型更新

**Shop模型新增字段：**
```python
app_key = Column(String(200), comment="Temu App Key")
app_secret = Column(Text, comment="Temu App Secret")
```

### API端点

**新增端点：**
- `POST /api/sync/shops/{shop_id}/orders` - 同步订单
- `POST /api/sync/shops/{shop_id}/products` - 同步商品

### 前端组件

**新增功能：**
- API配置模态框
- 配置状态标签
- 演示数据生成脚本

## 🆘 常见问题

### Q: 演示数据会影响真实数据吗？
A: 不会。演示数据有特殊标识（`DEMO_`前缀），与真实数据完全隔离。

### Q: 可以同时使用演示店铺和真实店铺吗？
A: 可以。系统支持混合使用，演示店铺和真实店铺可以并存。

### Q: 如何知道哪些是演示店铺？
A: 演示店铺的`shop_id`以`DEMO_`开头，店铺名称包含"演示"字样。

### Q: 不同店铺的API密钥有什么限制吗？
A: 没有限制。每个店铺可以配置不同的API密钥，支持完全独立的管理。

### Q: 如何批量配置多个店铺的API？
A: 目前需要逐个配置。未来版本可能会支持批量导入功能。

## 🎉 总结

v1.1.0版本带来了两大核心功能：

1. **灵活的API管理** - 支持多主体店铺独立配置
2. **演示数据系统** - 快速体验完整功能

这些改进让系统更加易用和强大！

